### README

## Обзор проекта

Этот проект включает создание Telegram-бота для анализа японских СМИ, который помогает пользователям, предоставляя информацию на основе предобученной модели и дополнительных контекстных данных, хранящихся в JSON-файлах. Бот взаимодействует с пользователями, обрабатывает их запросы и предоставляет ответы на основе указанного года. Проект включает очистку и подготовку данных JSON, интеграцию с Yandex GPT и Yandex Translate API, дообучение Yandex GPT, разработку алгоритмов для более качественного перевода, а также управление взаимодействиями через Telegram-бота.

### Структура проекта

```
.
├── config.json
├── app.py
├── requirements.txt
├── data
│   ├── cleaning_data.py

│   │   ├── file1.json
│   │   └── file2.json
```

### Подготовка данных

Мы получили данные в формате WARC файлов. Это были тексты новостей в необработанном формате HTML, не очищенном от рекламы, регулярно повторяющихся ссылок, анонсов, и проч. текстов, обрамляющих собственно новостной текст. В датасете встречались дубли одной новости на разных сайтах, возможно, в немного измененном виде. 

Мы очищали датасет следующими методами: 

### Основные этапы работы скрипта

1. **Очистка HTML контента и извлечение ссылок:**
   - Мы использовали библиотеку BeautifulSoup для очистки HTML контента. Мы удалили скрипты, стили, комментарии, рекламные блоки и другие ненужные элементы, чтобы извлечь только полезную текстовую информацию.
   - Также мы извлекли все ссылки, найденные в HTML контенте. Это позволило нам сохранять контекст и источники информации.

2. **Нормализация текста:**
   - Мы нормализовали текст с помощью функции `unicodedata.normalize`, чтобы привести его к единообразному виду и упростить дальнейшую обработку.

3. **Очистка текста от повторяющихся ссылок и лишних пробелов:**
   - Мы удалили повторяющиеся ссылки и лишние пробелы, чтобы текст был более читаемым и компактным. Это также помогло избежать дублирования информации при дальнейшем анализе.

4. **Удаление ссылок на изображения:**
   - Мы удалили ссылки на изображения, так как они не несут полезной текстовой информации для нашего анализа.

### Библиотеки и технологии

Мы использовали следующие библиотеки и технологии для реализации скрипта:
- **os**: Для работы с файловой системой.
- **hashlib**: Для генерации хэшей и уникальных имен файлов.
- **json**: Для работы с конфигурационными файлами и данными.
- **BeautifulSoup**: Для парсинга и очистки HTML контента.
- **unicodedata**: Для нормализации текста.
- **warcio**: Для чтения WARC файлов.
- **re**: Для работы с регулярными выражениями.
- **shutil**: Для работы с файловой системой (создание директорий, копирование файлов и т.д.).

### Преимущества подхода

Наш подход к очистке данных и извлечению информации из HTML контента позволяет существенно улучшить качество данных, используемых для обработки запросов на японском языке. Очистка от лишних элементов и нормализация текста делает данные более структурированными и удобными для анализа, что повышает точность и релевантность ответов, предоставляемых нашим Telegram-ботом. 

Код работы с датасетом Вы можете посмотреть в 
   ```sh
data/cleaning_data.py
   ```
Часть датасета для обучения Yandex GPT доступна в 
  ```sh
data/train2019.json
   ```

Полный очищенный датасет в формате .JSON Вы можете найти на Яндекс Диске по адресу https://disk.yandex.ru/d/JIXB7DPbTNygqg

### Техническая реализация

1. **Инициализация Telegram-бота:**
   - Мы использовали библиотеку `python-telegram-bot` для создания и настройки бота.

2. **Обработка запросов пользователей:**
   - Пользователь выбирает год данных через кнопки, предоставляемые ботом.
   - Запросы пользователей переводятся на японский язык с помощью Yandex Translate API.
   - Переведенный запрос и контекст из соответствующих JSON-файлов отправляются в дообученную Yandex GPT для получения ответа.

3. **Поиск ответов в JSON-файлах:**
   - JSON-файлы хранятся в папках, соответствующих годам данных.
   - В зависимости от выбранного пользователем года, производится поиск ответов в соответствующих папках.
   - Ответы ограничиваются пятью предложениями и сохраняются в файл для последующего использования.

4. **Перевод и форматирование ответов:**
   - Полученные ответы переводятся обратно на русский язык с сохранением имен собственных.
   - Форматирование ответа с добавлением ссылок на дополнительные материалы.

5. **Отправка ответа пользователю:**
   - Отформатированный ответ отправляется пользователю через Telegram-бота.

### Файл requirements.txt

Для установки всех необходимых библиотек и зависимостей используйте следующий файл 
   ```sh
   `requirements.txt`
   ```

### Установка и запуск проекта

1. Клонируйте репозиторий проекта:

   ```sh
   git clone https://github.com/your-repo/project.git
   cd project
   ```

2. Создайте и активируйте виртуальное окружение:

   ```sh
   python3 -m venv venv
   source venv/bin/activate
   ```

3. Установите зависимости:

   ```sh
   pip install -r requirements.txt
   ```

4. Настройте файл `config.json` с вашими ключами API и другими необходимыми параметрами.

5. Запустите бота:

   ```sh
   python main.py
   ```

Теперь ваш Telegram-бот готов к использованию. Вы можете взаимодействовать с ним через Telegram, отправляя запросы и получая информацию на основе данных из JSON-файлов.
